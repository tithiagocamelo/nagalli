function getURLVar(key){var value=[],query=String(document.location).split("?");if(query[1]){var part=query[1].split("&");for(i=0;i<part.length;i++){var data=part[i].split("=");data[0]&&data[1]&&(value[data[0]]=data[1])}return value[key]?value[key]:""}}$(document).ready((function(){$(".text-danger").each((function(){var element=$(this).parent().parent();element.hasClass("form-group")&&element.addClass("has-error")})),$("#form-currency .currency-select").on("click",(function(e){e.preventDefault(),$("#form-currency input[name='code']").val($(this).attr("name")),$("#form-currency").submit()})),$("#form-language .language-select").on("click",(function(e){e.preventDefault(),$("#form-language input[name='code']").val($(this).attr("name")),$("#form-language").submit()})),$("#btn-search").on("click",(function(){var url=$("base").attr("href")+"index.php?route=product/search",value=$("#ipt-search").val();value&&(url+="&search="+encodeURIComponent(value)),location=url})),$("#ipt-search").on("keydown",(function(e){13==e.keyCode&&$("#btn-search").trigger("click")})),$("#menu .dropdown-menu").each((function(){var menu=$("#menu").offset(),dropdown,i=$(this).parent().offset().left+$(this).outerWidth()-(menu.left+$("#menu").outerWidth());i>0&&$(this).css("margin-left","-"+(i+10)+"px")})),$("#list-view").click((function(){$("#content .product-grid > .clearfix").remove(),$("#content .row > .product-grid").attr("class","product-layout product-list col-xs-12"),$("#grid-view").removeClass("active"),$("#list-view").addClass("active"),localStorage.setItem("display","list")})),$("#grid-view").click((function(){var cols=$("#column-right, #column-left").length;2==cols?$("#content .product-list").attr("class","product-layout product-grid col-lg-6 col-md-6 col-sm-12 col-xs-12"):1==cols?$("#content .product-list").attr("class","product-layout product-grid col-lg-4 col-md-4 col-sm-6 col-xs-12"):$("#content .product-list").attr("class","product-layout product-grid col-lg-3 col-md-3 col-sm-6 col-xs-12"),$("#list-view").removeClass("active"),$("#grid-view").addClass("active"),localStorage.setItem("display","grid")})),"list"==localStorage.getItem("display")?($("#list-view").trigger("click"),$("#list-view").addClass("active")):($("#grid-view").trigger("click"),$("#grid-view").addClass("active")),$(document).on("keydown","#collapse-checkout-option input[name='email'], #collapse-checkout-option input[name='password']",(function(e){13==e.keyCode&&$("#collapse-checkout-option #button-login").trigger("click")})),$("[data-toggle='tooltip']").tooltip({container:"body"}),$(document).ajaxStop((function(){$("[data-toggle='tooltip']").tooltip({container:"body"})}))}));var cart={add:function(product_id,quantity,isProductScreen=!1){isProductScreen?$.ajax({url:"index.php?route=checkout/cart/add",type:"post",data:"product_id="+product_id+"&quantity="+(void 0!==quantity?quantity:1),dataType:"json",beforeSend:function(){$("#cart > button").button("loading")},complete:function(){$("#cart > button").button("reset")},success:function(json){$(".alert, .text-danger").remove(),json.redirect&&(location=json.redirect),json.success&&($("#content").parent().before('<div class="alert alert-success"><i class="fa fa-check-circle"></i> '+json.success+' <button type="button" class="close" data-dismiss="alert">&times;</button></div>'),setTimeout((function(){$("#cart-total").html(" "+json.total)}),100),$("html, body").animate({scrollTop:0},"slow"),$("#cart > ul").load("index.php?route=common/cart/info ul li"))},error:function(xhr,ajaxOptions,thrownError){alert(thrownError+"\r\n"+xhr.statusText+"\r\n"+xhr.responseText)}}):($("#modal-quickview").remove(),$.ajax({url:"index.php?route=product/quickview&product_id="+product_id,type:"get",dataType:"html",success:function(response){let html='<div id="modal-quickview" class="modal">';html+='  <div class="modal-dialog">',html+='    <div class="modal-content">',html+='      <div class="modal-header">',html+='        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>',html+='        <h4 class="modal-title" id="titulo-modal"></h4>',html+="      </div>",html+='      <div class="modal-body">'+response+"</div>",html+="    </div",html+="  </div>",html+="</div>",document.body.insertAdjacentHTML("beforeend",html),$("#modal-quickview").modal("show")}}))},update:function(key,quantity){$.ajax({url:"index.php?route=checkout/cart/edit",type:"post",data:"key="+key+"&quantity="+(void 0!==quantity?quantity:1),dataType:"json",beforeSend:function(){$("#cart > button").button("loading")},complete:function(){$("#cart > button").button("reset")},success:function(json){setTimeout((function(){$("#cart-total").html(" "+json.total)}),100);var getURlRewrite=$(location).attr("href").split("/").pop();"checkout/cart"==getURLVar("route")||"checkout/checkout"==getURLVar("route")?location="index.php?route=checkout/cart":"carrinho"==getURlRewrite||"finalizar"==getURlRewrite?location="carrinho":$("#cart > ul").load("index.php?route=common/cart/info ul li")},error:function(xhr,ajaxOptions,thrownError){alert(thrownError+"\r\n"+xhr.statusText+"\r\n"+xhr.responseText)}})},remove:function(key){$.ajax({url:"index.php?route=checkout/cart/remove",type:"post",data:"key="+key,dataType:"json",beforeSend:function(){$("#cart > button").button("loading")},complete:function(){$("#cart > button").button("reset")},success:function(json){setTimeout((function(){$("#cart-total").html(" "+json.total)}),100);var getURlRewrite=$(location).attr("href").split("/").pop();"checkout/cart"==getURLVar("route")||"checkout/checkout"==getURLVar("route")?location="index.php?route=checkout/cart":"carrinho"==getURlRewrite||"finalizar"==getURlRewrite?location="carrinho":$("#cart > ul").load("index.php?route=common/cart/info ul li")},error:function(xhr,ajaxOptions,thrownError){alert(thrownError+"\r\n"+xhr.statusText+"\r\n"+xhr.responseText)}})}},voucher={add:function(){},remove:function(key){$.ajax({url:"index.php?route=checkout/cart/remove",type:"post",data:"key="+key,dataType:"json",beforeSend:function(){$("#cart > button").button("loading")},complete:function(){$("#cart > button").button("reset")},success:function(json){setTimeout((function(){$("#cart-total").html(" "+json.total)}),100);var getURlRewrite=$(location).attr("href").split("/").pop();"checkout/cart"==getURLVar("route")||"checkout/checkout"==getURLVar("route")?location="index.php?route=checkout/cart":"carrinho"==getURlRewrite||"finalizar"==getURlRewrite?location="carrinho":$("#cart > ul").load("index.php?route=common/cart/info ul li")},error:function(xhr,ajaxOptions,thrownError){alert(thrownError+"\r\n"+xhr.statusText+"\r\n"+xhr.responseText)}})}},wishlist={add:function(product_id){$.ajax({url:"index.php?route=account/wishlist/add",type:"post",data:"product_id="+product_id,dataType:"json",success:function(json){$(".alert").remove(),json.redirect&&(location=json.redirect),json.success&&$("#content").parent().before('<div class="alert alert-success"><i class="fa fa-check-circle"></i> '+json.success+' <button type="button" class="close" data-dismiss="alert">&times;</button></div>'),$("#wishlist-total span").html(json.total),$("#wishlist-total").attr("title",json.total),$("html, body").animate({scrollTop:0},"slow")},error:function(xhr,ajaxOptions,thrownError){alert(thrownError+"\r\n"+xhr.statusText+"\r\n"+xhr.responseText)}})},remove:function(){}},compare={add:function(product_id){$.ajax({url:"index.php?route=product/compare/add",type:"post",data:"product_id="+product_id,dataType:"json",success:function(json){$(".alert").remove(),json.success&&($("#content").parent().before('<div class="alert alert-success"><i class="fa fa-check-circle"></i> '+json.success+' <button type="button" class="close" data-dismiss="alert">&times;</button></div>'),$("#compare-total").html(json.total),$("html, body").animate({scrollTop:0},"slow"))},error:function(xhr,ajaxOptions,thrownError){alert(thrownError+"\r\n"+xhr.statusText+"\r\n"+xhr.responseText)}})},remove:function(){}};$(document).delegate(".agree","click",(function(e){e.preventDefault(),$("#modal-agree").remove();var element=this;$.ajax({url:$(element).attr("href"),type:"get",dataType:"html",success:function(data){html='<div id="modal-agree" class="modal">',html+='  <div class="modal-dialog">',html+='    <div class="modal-content">',html+='      <div class="modal-header">',html+='        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>',html+='        <h4 class="modal-title">'+$(element).text()+"</h4>",html+="      </div>",html+='      <div class="modal-body">'+data+"</div>",html+="    </div",html+="  </div>",html+="</div>",$("body").append(html),$("#modal-agree").modal("show")}})})),function($){$.fn.autocomplete=function(option){return this.each((function(){this.timer=null,this.items=new Array,$.extend(this,option),$(this).attr("autocomplete","off"),$(this).on("focus",(function(){this.request()})),$(this).on("blur",(function(){setTimeout((function(object){object.hide()}),200,this)})),$(this).on("keydown",(function(event){switch(event.keyCode){case 27:this.hide();break;default:this.request()}})),this.click=function(event){event.preventDefault(),value=$(event.target).parent().attr("data-value"),value&&this.items[value]&&this.select(this.items[value])},this.show=function(){var pos=$(this).position();$(this).siblings("ul.dropdown-menu").css({top:pos.top+$(this).outerHeight(),left:pos.left}),$(this).siblings("ul.dropdown-menu").show()},this.hide=function(){$(this).siblings("ul.dropdown-menu").hide()},this.request=function(){clearTimeout(this.timer),this.timer=setTimeout((function(object){object.source($(object).val(),$.proxy(object.response,object))}),200,this)},this.response=function(json){if(html="",json.length){for(i=0;i<json.length;i++)this.items[json[i].value]=json[i];for(i=0;i<json.length;i++)json[i].category||(html+='<li data-value="'+json[i].value+'"><a href="#">'+json[i].label+"</a></li>");var category=new Array;for(i=0;i<json.length;i++)json[i].category&&(category[json[i].category]||(category[json[i].category]=new Array,category[json[i].category].name=json[i].category,category[json[i].category].item=new Array),category[json[i].category].item.push(json[i]));for(i in category)for(html+='<li class="dropdown-header">'+category[i].name+"</li>",j=0;j<category[i].item.length;j++)html+='<li data-value="'+category[i].item[j].value+'"><a href="#">&nbsp;&nbsp;&nbsp;'+category[i].item[j].label+"</a></li>"}html?this.show():this.hide(),$(this).siblings("ul.dropdown-menu").html(html)},$(this).after('<ul class="dropdown-menu"></ul>'),$(this).siblings("ul.dropdown-menu").delegate("a","click",$.proxy(this.click,this))}))}}(window.jQuery);